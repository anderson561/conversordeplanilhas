<?php

function calculateMod11(string $chave): int
{
    $peso = 2;
    $soma = 0;

    for ($i = strlen($chave) - 1; $i >= 0; $i--) {
        $soma += intval($chave[$i]) * $peso;
        $peso = ($peso == 9) ? 2 : $peso + 1;
    }

    $resto = $soma % 11;
    $dv = ($resto == 0 || $resto == 1) ? 0 : 11 - $resto;

    return $dv;
}

$keysToCheck = [
    '29251225311856000109440010002471001958961536',
    '29251225311856000109440010002471011986286012',
    '29251225311856000109440010002471021790760762',
    '29251225311856000109440010002471031372312311',
    '29251225311856000109440010002471041885556156',
    '29251225311856000109440010002471051306300860',
    '29251225311856000109440010002471061223454043',
    '29251225311856000109440010002471071602003241',
    '29251225311856000109440010002471081717718860',
    '29251225311856000109440010002471091565360648',
    '29251225311856000109440010002471101017738263',
    '29251225311856000109440010002471111136096572',
    '29251225311856000109440010002471121917116514',
    '29251225311856000109440010002471131619781711',
    '29251225311856000109440010002471141873417152',
    '29251225311856000109440010002471151365051509',
    '29251225311856000109440010002471161131052956',
    '29251225311856000109440010002471171191560068',
    '29251225311856000109440010002471181608108987',
    '29251225311856000109440010002471191007437371',
    '29251225311856000109440010002471201887544574',
    '29251225311856000109440010002471211522805537',
    '29251225311856000109440010002471221020905206',
    '29251225311856000109440010002471231788652931',
    '29251225311856000109440010002471241129736551',
    '29251225311856000109440010002471251533241809',
    '29251225311856000109440010002471261107060630'
];

foreach ($keysToCheck as $fullKey) {
    if (strlen($fullKey) !== 44) {
        echo "Key length error: " . strlen($fullKey) . " ($fullKey)\n";
        continue;
    }
    $base = substr($fullKey, 0, 43);
    $dv = substr($fullKey, 43, 1);

    $calculated = calculateMod11($base);

    if ($dv != $calculated) {
        echo "INVALID: $fullKey | Exp: $calculated | Got: $dv\n";
    } else {
        echo "VALID: $fullKey\n";
    }
}
